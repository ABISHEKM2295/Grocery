<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping Cart | Green Baskets</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"
    />
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f8f9fa;
        margin: 0;
        padding: 0;
      }

      .navbar {
        background-color: #28a745;
        color: #fff;
      }

      .navbar-brand {
        font-size: 24px;
        font-weight: bold;
      }

      .navbar .nav-link {
        color: #fff;
      }

      .cart-container {
        max-width: 900px;
        margin: 40px auto;
        background: #fff;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .cart-header {
        padding-bottom: 20px;
        border-bottom: 1px solid #e0e0e0;
        margin-bottom: 20px;
      }

      .cart-title {
        color: #28a745;
        font-weight: 700;
      }

      .cart-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 15px;
        border-bottom: 1px solid #f0f0f0;
        transition: background-color 0.3s;
      }

      .cart-item:hover {
        background-color: #f8f9fa;
      }

      .cart-item-image {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: 8px;
        margin-right: 15px;
      }

      .item-details {
        flex: 1;
        padding-right: 15px;
      }

      .item-name {
        font-size: 18px;
        font-weight: 600;
        margin: 0;
      }

      .item-price {
        color: #28a745;
        font-weight: 600;
        margin: 5px 0;
      }

      .quantity-controls {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 0 15px;
      }

      .quantity-btn {
        background-color: #28a745;
        color: white;
        border: none;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border-radius: 50%;
        font-size: 16px;
        transition: all 0.3s;
      }

      .quantity-btn:hover {
        background-color: #218838;
        transform: scale(1.1);
      }

      .quantity-input {
        width: 40px;
        text-align: center;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-weight: bold;
        height: 36px;
      }

      .remove-btn {
        background-color: #ff4d4d;
        color: white;
        border: none;
        padding: 8px 15px;
        cursor: pointer;
        border-radius: 20px;
        transition: background-color 0.3s;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .remove-btn:hover {
        background-color: #e60000;
      }

      .item-total {
        font-weight: 600;
        width: 100px;
        text-align: right;
      }

      .cart-summary {
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin-top: 30px;
      }

      .summary-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .summary-title {
        font-weight: 600;
      }

      .total-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 20px;
        font-weight: bold;
        padding-top: 15px;
        border-top: 2px solid #e0e0e0;
        margin-top: 15px;
      }

      .action-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
        gap: 15px;
      }

      .clear-cart-btn {
        background-color: #ff4d4d;
        color: white;
        border: none;
        padding: 12px 25px;
        cursor: pointer;
        border-radius: 25px;
        font-weight: 600;
        transition: all 0.3s;
        flex: 1;
        max-width: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .clear-cart-btn:hover {
        background-color: #e60000;
        transform: translateY(-2px);
      }

      .checkout-btn {
        background-color: #28a745;
        color: white;
        border: none;
        padding: 12px 25px;
        cursor: pointer;
        border-radius: 25px;
        font-weight: 600;
        transition: all 0.3s;
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .checkout-btn:hover {
        background-color: #218838;
        transform: translateY(-2px);
      }

      .empty-cart-message {
        text-align: center;
        padding: 50px 0;
      }

      .empty-cart-icon {
        font-size: 60px;
        color: #6c757d;
        margin-bottom: 20px;
      }

      .continue-shopping-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background-color: #28a745;
        color: white;
        text-decoration: none;
        padding: 10px 20px;
        border-radius: 20px;
        font-weight: 500;
        transition: all 0.3s;
      }

      .continue-shopping-btn:hover {
        background-color: #218838;
        transform: translateY(-2px);
        color: white;
      }

      /* Animation for adding/removing items */
      @keyframes fadeEffect {
        from {
          opacity: 0;
        }

        to {
          opacity: 1;
        }
      }

      .fade-in {
        animation: fadeEffect 0.5s;
      }

      /* Added styles for a more attractive look */
      .badge-organic {
        background-color: #aed581;
        color: #33691e;
        border-radius: 12px;
        padding: 3px 8px;
        font-size: 12px;
        margin-left: 8px;
      }

      .product-category {
        color: #6c757d;
        font-size: 14px;
        margin-top: 4px;
      }

      .savings-badge {
        background-color: #ffcdd2;
        color: #c62828;
        border-radius: 12px;
        padding: 3px 8px;
        font-size: 12px;
        margin-left: 8px;
      }

      .coupon-section {
        margin-top: 20px;
        padding: 15px;
        background-color: #e8f5e9;
        border-radius: 10px;
        border-left: 4px solid #28a745;
      }

      .coupon-input {
        display: flex;
        gap: 10px;
      }

      .coupon-input input {
        flex: 1;
        padding: 8px 15px;
        border: 1px solid #ced4da;
        border-radius: 20px;
      }

      .apply-coupon-btn {
        background-color: #28a745;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .apply-coupon-btn:hover {
        background-color: #218838;
      }

      .suggested-items {
        margin-top: 40px;
      }

      .suggested-title {
        color: #28a745;
        margin-bottom: 20px;
        font-weight: 600;
      }

      .suggested-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 15px;
      }

      .suggested-item {
        background-color: #fff;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s;
        cursor: pointer;
      }

      .suggested-item:hover {
        transform: translateY(-5px);
      }

      .suggested-img {
        width: 100%;
        height: 120px;
        object-fit: cover;
      }

      .suggested-info {
        padding: 12px;
      }

      .suggested-name {
        font-weight: 600;
        margin-bottom: 5px;
        font-size: 15px;
      }

      .suggested-price {
        color: #28a745;
        font-weight: 600;
      }

      .add-suggested {
        background-color: #28a745;
        color: white;
        border: none;
        width: 100%;
        padding: 8px;
        margin-top: 8px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .add-suggested:hover {
        background-color: #218838;
      }
    </style>
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <a class="navbar-brand" href="index.html">
          <i class="bi bi-basket2-fill me-2"></i>Green Baskets
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="products.html">Products</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="cart.html">
                <i class="bi bi-cart3"></i> Cart
                <span class="badge bg-light text-dark">4</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="account.html">
                <i class="bi bi-person-circle"></i> Account
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
      <div class="cart-container">
        <div class="cart-header">
          <h2 class="cart-title">Your Shopping Cart</h2>
          <p class="text-muted">4 items in your cart</p>
        </div>

        <!-- Cart Items -->
        <div class="cart-items">
          <!-- Item 1 -->
          <div class="cart-item fade-in" data-item-id="1">
            <img
              src="images/products/organic-apples.jpg"
              alt="Organic Apples"
              class="cart-item-image"
            />
            <div class="item-details">
              <h4 class="item-name">
                Organic Apples <span class="badge-organic">Organic</span>
              </h4>
              <p class="product-category">Fresh Fruit</p>
              <p class="item-price">
                $4.99 <span class="savings-badge">Save $1.00</span>
              </p>
            </div>
            <div class="quantity-controls">
              <button class="quantity-btn quantity-decrease">-</button>
              <input type="number" class="quantity-input" value="2" min="1" />
              <button class="quantity-btn quantity-increase">+</button>
            </div>
            <div class="item-total">$9.98</div>
            <button class="remove-btn">
              <i class="bi bi-trash"></i> Remove
            </button>
          </div>

          <!-- Item 2 -->
          <div class="cart-item fade-in" data-item-id="2">
            <img
              src="images/products/fresh-milk.jpg"
              alt="Fresh Milk"
              class="cart-item-image"
            />
            <div class="item-details">
              <h4 class="item-name">Fresh Milk 1L</h4>
              <p class="product-category">Dairy</p>
              <p class="item-price">$2.49</p>
            </div>
            <div class="quantity-controls">
              <button class="quantity-btn quantity-decrease">-</button>
              <input type="number" class="quantity-input" value="1" min="1" />
              <button class="quantity-btn quantity-increase">+</button>
            </div>
            <div class="item-total">$2.49</div>
            <button class="remove-btn">
              <i class="bi bi-trash"></i> Remove
            </button>
          </div>

          <!-- Item 3 -->
          <div class="cart-item fade-in" data-item-id="3">
            <img
              src="images/products/whole-wheat-bread.jpg"
              alt="Whole Wheat Bread"
              class="cart-item-image"
            />
            <div class="item-details">
              <h4 class="item-name">
                Whole Wheat Bread <span class="badge-organic">Organic</span>
              </h4>
              <p class="product-category">Bakery</p>
              <p class="item-price">$3.99</p>
            </div>
            <div class="quantity-controls">
              <button class="quantity-btn quantity-decrease">-</button>
              <input type="number" class="quantity-input" value="1" min="1" />
              <button class="quantity-btn quantity-increase">+</button>
            </div>
            <div class="item-total">$3.99</div>
            <button class="remove-btn">
              <i class="bi bi-trash"></i> Remove
            </button>
          </div>
          <!-- Item 4 -->
          <div class="cart-item fade-in" data-item-id="4">
            <img
              src="images/products/chicken-breast.jpg"
              alt="Chicken Breast"
              class="cart-item-image"
            />
            <div class="item-details">
              <h4 class="item-name">Chicken Breast 500g</h4>
              <p class="product-category">Meat & Poultry</p>
              <p class="item-price">
                $7.99 <span class="savings-badge">Save $2.00</span>
              </p>
            </div>
            <div class="quantity-controls">
              <button class="quantity-btn quantity-decrease">-</button>
              <input type="number" class="quantity-input" value="1" min="1" />
              <button class="quantity-btn quantity-increase">+</button>
            </div>
            <div class="item-total">$7.99</div>
            <button class="remove-btn">
              <i class="bi bi-trash"></i> Remove
            </button>
          </div>
        </div>

        <!-- Coupon Section -->
        <div class="coupon-section">
          <h4>Apply Coupon</h4>
          <div class="coupon-input">
            <input type="text" placeholder="Enter coupon code" />
            <button class="apply-coupon-btn" id="applyCouponBtn">Apply</button>
          </div>
        </div>

        <!-- Cart Summary -->
        <div class="cart-summary">
          <h3>Order Summary</h3>
          <div class="summary-row">
            <span class="summary-title">Subtotal:</span>
            <span>$24.45</span>
          </div>
          <div class="summary-row">
            <span class="summary-title">Discount:</span>
            <span>-$3.00</span>
          </div>
          <div class="summary-row">
            <span class="summary-title">Shipping:</span>
            <span>$5.00</span>
          </div>
          <div class="total-container">
            <span>Total:</span>
            <span>$26.45</span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="clear-cart-btn" id="clearCartBtn">
            <i class="bi bi-trash"></i> Clear Cart
          </button>
          <button class="checkout-btn" id="checkoutBtn">
            <i class="bi bi-bag-check"></i> Proceed to Checkout
          </button>
        </div>
      </div>

      <!-- Suggested Items -->
      <div class="suggested-items">
        <h3 class="suggested-title">You might also like</h3>
        <div class="suggested-grid">
          <!-- Suggested Item 1 -->
          <div class="suggested-item">
            <img
              src="images/products/avocado.jpg"
              alt="Avocado"
              class="suggested-img"
            />
            <div class="suggested-info">
              <h4 class="suggested-name">Avocado</h4>
              <p class="suggested-price">$2.49</p>
              <button class="add-suggested" id="addToCartBtn">
                Add to Cart
              </button>
            </div>
          </div>

          <!-- Suggested Item 2 -->
          <div class="suggested-item">
            <img
              src="images/products/blueberries.jpg"
              alt="Blueberries"
              class="suggested-img"
            />
            <div class="suggested-info">
              <h4 class="suggested-name">Blueberries</h4>
              <p class="suggested-price">$3.99</p>
              <button class="add-suggested" id="addToCartBtn">
                Add to Cart
              </button>
            </div>
          </div>

          <!-- Suggested Item 3 -->
          <div class="suggested-item">
            <img
              src="images/products/spinach.jpg"
              alt="Spinach"
              class="suggested-img"
            />
            <div class="suggested-info">
              <h4 class="suggested-name">Spinach</h4>
              <p class="suggested-price">$1.99</p>
              <button class="add-suggested" id="addToCartBtn">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-light py-4 mt-5">
      <div class="container text-center">
        <p>&copy; 2024 Green Baskets. All rights reserved.</p>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Checkout Button - FIXED: Now redirects to payment.html
        const checkoutBtn = document.getElementById("checkoutBtn");
        checkoutBtn.addEventListener("click", function () {
          window.location.href = "payment.html"; // Redirect to payment page
        });

        // Quantity Buttons
        const quantityControls = document.querySelectorAll(".cart-item");

        quantityControls.forEach((control) => {
          const decreaseButton = control.querySelector(".quantity-decrease");
          const increaseButton = control.querySelector(".quantity-increase");
          const quantityInput = control.querySelector(".quantity-input");
          const itemId = control.dataset.itemId;

          decreaseButton.addEventListener("click", function () {
            let currentValue = parseInt(quantityInput.value);
            if (currentValue > 1) {
              quantityInput.value = currentValue - 1;
              updateCart(itemId, quantityInput.value); // Call function to update cart
            }
          });

          increaseButton.addEventListener("click", function () {
            let currentValue = parseInt(quantityInput.value);
            quantityInput.value = currentValue + 1;
            updateCart(itemId, quantityInput.value); // Call function to update cart
          });

          quantityInput.addEventListener("change", function () {
            if (parseInt(quantityInput.value) < 1) {
              quantityInput.value = 1;
            }
            updateCart(itemId, quantityInput.value); // Call function to update cart
          });
        });

        // Remove Buttons
        const removeButtons = document.querySelectorAll(".remove-btn");

        removeButtons.forEach((button) => {
          button.addEventListener("click", function () {
            const cartItem = button.closest(".cart-item");
            const itemId = cartItem.dataset.itemId;
            removeItemFromCart(itemId); // Call function to remove item
            cartItem.remove(); // Remove the item from the display
            updateCartSummary(); // Update the cart summary
          });
        });

        // Clear Cart Button - FIXED: Now just clears cart without redirecting
        const clearCartBtn = document.getElementById("clearCartBtn");
        clearCartBtn.addEventListener("click", function () {
          clearCart(); // Call function to clear the cart
        });

        // Apply Coupon Button
        const applyCouponBtn = document.getElementById("applyCouponBtn");
        applyCouponBtn.addEventListener("click", function () {
          applyCoupon(); // Call function to apply coupon
        });

        // Add to Cart Buttons (Suggested Items)
        const addToCartButtons = document.querySelectorAll(".add-suggested");

        addToCartButtons.forEach((button) => {
          button.addEventListener("click", function () {
            const suggestedItem = button.closest(".suggested-item");
            const itemName =
              suggestedItem.querySelector(".suggested-name").textContent;
            const itemPrice =
              suggestedItem.querySelector(".suggested-price").textContent;

            addToCart(itemName, itemPrice); // Function to add suggested item to cart
          });
        });

        // --- Helper Functions (Adapt to your system) ---

        function updateCart(itemId, quantity) {
          // Send AJAX request to update cart in the backend
          console.log(`Update item ${itemId} to quantity ${quantity}`);
          // Example using fetch:
          // fetch('/update-cart', {
          //     method: 'POST',
          //     body: JSON.stringify({ itemId: itemId, quantity: quantity }),
          //     headers: { 'Content-Type': 'application/json' }
          // })
          // .then(response => response.json())
          // .then(data => {
          //     if (data.success) {
          //         updateCartSummary(); // Update cart summary after successful update
          //     }
          // });
        }

        function removeItemFromCart(itemId) {
          // Send AJAX request to remove item from cart in the backend
          console.log(`Remove item ${itemId} from cart`);
          // Example using fetch:
          // fetch('/remove-from-cart', {
          //     method: 'POST',
          //     body: JSON.stringify({ itemId: itemId }),
          //     headers: { 'Content-Type': 'application/json' }
          // })
          // .then(response => response.json())
          // .then(data => {
          //     if (data.success) {
          //         updateCartSummary(); // Update cart summary after successful removal
          //     }
          // });
        }

        function clearCart() {
          // Send AJAX request to clear cart in the backend
          console.log("Clear cart");
          // Example using fetch:
          // fetch('/clear-cart', { method: 'POST' })
          // .then(response => response.json())
          // .then(data => {
          //     if (data.success) {
          //         // Clear the cart items from the display
          //         const cartItems = document.querySelector('.cart-items');
          //         cartItems.innerHTML = '';
          //         updateCartSummary(); // Update cart summary after clearing cart
          //     }
          // });
        }

        function applyCoupon() {
          // Get coupon code from input field and send AJAX request to apply coupon
          console.log("Apply coupon");
          // Example using fetch:
          // const couponCode = document.querySelector('.coupon-input input').value;
          // fetch('/apply-coupon', {
          //     method: 'POST',
          //     body: JSON.stringify({ couponCode: couponCode }),
          //     headers: { 'Content-Type': 'application/json' }
          // })
          // .then(response => response.json())
          // .then(data => {
          //     if (data.success) {
          //         updateCartSummary(); // Update cart summary after applying coupon
          //     }
          // });
        }

        function addToCart(itemName, itemPrice) {
          // Send AJAX request to add suggested item to cart
          console.log(`Add ${itemName} to cart with price ${itemPrice}`);
          // Example using fetch:
          // fetch('/add-to-cart', {
          //     method: 'POST',
          //     body: JSON.stringify({ itemName: itemName, itemPrice: itemPrice }),
          //     headers: { 'Content-Type': 'application/json' }
          // })
          // .then(response => response.json())
          // .then(data => {
          //     if (data.success) {
          //         // Optionally, provide feedback to the user
          //         alert(`${itemName} added to cart!`);
          //     }
          // });
        }

        function updateCartSummary() {
          // Calculate and update the cart summary (subtotal, discount, shipping, total)
          console.log("Update cart summary");
          // Get cart data (e.g., from localStorage or AJAX request)
          // Calculate subtotal, discount, shipping, and total based on cart data
          // Update the corresponding elements in the cart summary section
          // Example:
          // document.querySelector('.summary-row:nth-child(1) span:nth-child(2)').textContent = `$${subtotal}`;
          // document.querySelector('.summary-row:nth-child(2) span:nth-child(2)').textContent = `-$${discount}`;
          // document.querySelector('.summary-row:nth-child(3) span:nth-child(2)').textContent = `$${shipping}`;
          // document.querySelector('.total-container span:nth-child(2)').textContent = `$${total}`;
        }
      });
    </script>
  </body>
</html>
